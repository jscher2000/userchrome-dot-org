<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="256x256" href="/img/Fxcss_256.png">
<title>Megabar &ndash; Configuring and Styling the Firefox 75 Address Bar</title>
<link rel="stylesheet" href="styles.css" type="text/css">
<style>
#mbarsettings td { vertical-align: top; }
#mbarsettings td p { margin-top: 0; }
#mbarsettings select { margin-left: 0.25in; min-width: 200px; }
/* Generated by http://css.spritegen.com CSS Sprite Generator */
.popout-0px { background-position: -0px -0px; width: 490px; height: 125px; }
.popout-1px { background-position: -490px -0px; width: 490px; height: 125px; }
.popout-2px { background-position: -0px -125px; width: 490px; height: 125px; }
.popout-3px { background-position: -490px -125px; width: 490px; height: 125px; }
.popout-4px { background-position: -0px -250px; width: 490px; height: 125px; }
.popout-5px { background-position: -490px -250px; width: 490px; height: 125px; }
.popout-6px { background-position: -0px -375px; width: 490px; height: 125px; }
.popout-7px { background-position: -490px -375px; width: 490px; height: 125px; }
</style>
</head>
<body>
<nav>
<ul>
<li id="logo">userChrome.org</li>
<li><a href="what-is-userchrome-css.html" title="What is userChrome.css and what can it do?">WHAT</a></li>
<li><a href="how-create-userchrome-css.html" title="How to Create a userChrome.css File">HOW</a></li>
<li><a href="help-with-userchrome-css.html" title="Resources for Style Recipes and Tools">RESOURCES</a></li>
</ul>
<div id="rightnav">
<a href="javascript:void(0);" title="Load AddToAny" onclick="document.getElementById('confa2a').style.display='block';return false;">SHARE</a>
<a href="javascript:void(0);" title="Load Google Translate" onclick="document.getElementById('confgt').style.display='block';return false;">TRANSLATE</a>
<a href="javascript:void(0);" title="Load Comment Panel" onclick="togComments(this);return false;">FEEDBACK</a>
<div id="confa2a" class="yesno">Load script from AddToAny to share this page? (<a href="https://www.addtoany.com/privacy" rel="noopener" target="_blank">Privacy Policy</a>) <span style="position:absolute; right: 8px"><button onclick="loadShare('1', this);">OK</button>&nbsp;<button onclick="document.getElementById('confa2a').style.display='none';">Cancel</button></span></div>
<div id="confgt" class="yesno">Load script from Google Translate to select a language? (<a href="https://www.google.com/intl/en/policies/privacy/" rel="noopener" target="_blank">Privacy Policy</a>) <span style="position:absolute; right: 8px"><button onclick="loadTrans('2', this);">OK</button>&nbsp;<button onclick="document.getElementById('confgt').style.display='none';">Cancel</button></span></div>
<div id="hotnews"><a href="firefox-changes-userchrome-css.html#fx69">Firefox 69 Broke It!</a></div>
</div>
</nav>
<header>
<h1>Megabar &ndash; Configuring and Styling the Firefox 75 Address Bar</h1>
<p>Posted by jscher2000 on April 11, 2020; updated April 12, 2020</p>
</header>

<article>
<div id="main">
<p>The "focused" address bar in Firefox 75 has been controversial in the days since it debuted. Some users do not recognize or want to see the list of sites that drops
down automatically when you click in the bar, while others object to the way it bulges and casts a shadow over the Bookmarks Toolbar. This page provides information and tools for 
managing the behavior and appearance of the bar and its drop-down.</p>

<h3 id="update1">Temporary Preference to Disable Megabar</h3>
<p>If you're not ready to work with it, Firefox&nbsp;75 includes a preference to disable the new "enlarging" design and revert to the Firefox&nbsp;74 design. 
This option is expected to be removed in a few versions, but you can use it for the time being and return to this page for additional styling-related suggestions in the future.</p>
<ol type="A">
	<li>In a new tab, type or paste <strong>about:config</strong> in the address bar and press Enter/Return. Click the button accepting the risk.</li>
	<li>In the search box in the page, type or paste <strong>URLB</strong> and pause while the list is filtered.</li>
	<li>Double-click the <strong>browser.urlbar.update1</strong> preference to switch the value from true to false.</li>
</ol>
<p>This change doesn't take effect in currently open windows, but you will see the old bar in new windows or after exiting/quitting out of Firefox and starting it up again.</p>
<p style="border-top:1px solid #aaa;">&nbsp;</p>

<div style="page-break-inside: avoid;">
<h3 id="topsites">Are those really *my* Top Sites? Where is "Show History"?</h3>
<p><img src="img/Fx75-megabar-top-sites.png" style="width:800px"></p>
<p>The Firefox Home page (internal address <strong>about:home</strong>) and New Tab page (internal address <strong>about:newtab</strong>) share a Top Sites section containing 
a combination of pre-pinned search shortcuts, popular sites, and URLs from your history. In Firefox&nbsp;75, the first eight Top Sites appears on the drop-down. If 
you have been ignoring this section, it's probably confusing to see this list. For information on how to add, remove, and rearrange those sites, see the Mozilla Support article: 
<a href="https://support.mozilla.org//kb/customize-new-tab-page" target="_blank">Customize the New Tab page</a>.</p>
</div>
<p>If you want to prevent the Top Sites list from automatically dropping down, you have two choices using preference changes:</p>
<p>(1) <em>Switch back to showing sites from history when clicking in the address bar:</em></p>
<p>You can do this by disabling the Top Sites section on the Firefox Home / new tab page, as described in the Mozilla Support article <a 
href="https://support.mozilla.org/kb/hide-or-display-content-new-tab" target="_blank">Hide or display content in New Tab</a>. On the 
Options/Preferences page, Home panel, uncheck the box for Top Sites:</p>
<p><img src="img/Fx75-options-home-top-sites.png" style="width:440px"></p>
<p>Alternately, you can toggle a preference using about:config:</p>
<ol type="A">
	<li>In a new tab, type or paste <strong>about:config</strong> in the address bar and press Enter/Return. Click the button accepting the risk.</li>
	<li>In the search box in the page, type or paste <strong>topsi</strong> and pause while the list is filtered.</li>
	<li>Double-click the <strong>browser.newtabpage.activity-stream.feeds.topsites</strong> preference to switch the value from true to false.</li>
</ol>
<p>(2) <em>Don't open the drop-down at all when first clicking in an empty address bar:</em></p>
<ol type="A">
	<li>In a new tab, type or paste <strong>about:config</strong> in the address bar and press Enter/Return. Click the button accepting the risk.</li>
	<li>In the search box in the page, type or paste <strong>URLB</strong> and pause while the list is filtered.</li>
	<li>Double-click the <strong>browser.urlbar.openViewOnFocus</strong> preference to switch the value from true to false.</li>
</ol>
<p>With that change, you can delete the current page URL or, if the bar is empty, press the down arrow to display the "Show History" list.</p>
<p style="border-top:1px solid #aaa;">&nbsp;</p>

<div style="page-break-inside: avoid;">
<h3 id="standardfeatures">Managing Standard Address Bar / Drop-down Features</h3>
<p><img src="img/Fx75-standard-address-bar-features.png" style="width:800px"></p>
<p>You can disable many of the features of the drop-down to see the matches you find most useful. Many of these changes can be made on the Options/Preferences page, 
while some require a visit to the <a href="https://support.mozilla.org//kb/about-config-editor-firefox" target="_blank">Advanced Configuration Editor</a> (about:config).<p>
</div>

<h4>Four Types of Suggestions</h4>
<p><em>Search Engine Suggestions</em> are retrieved dynamically from your current default search engine site. You can move these before or after other kinds of suggestions, 
or disable them completely using checkboxes on the search panel of the Options/Preferences page. For more information, see the Mozilla Support article: 
<a href="https://support.mozilla.org//kb/search-suggestions-firefox" target="_blank">Search suggestions in Firefox</a>.</p>
<p><em>Bookmark Suggestions</em> show matches among your bookmarked sites, <em>Open Tab Suggestions</em> show matches to currently open pages, and 
<em>History Suggestions</em> show matches among sites you have visited. Want to hide some of those? To learn how to turn various of those categories
on and off, see the Mozilla Support article: <a href="https://support.mozilla.org//kb/address-bar-autocomplete-firefox" target="_blank">Address bar autocomplete in Firefox - 
Search your bookmarks, history and tabs</a>.</p>

<h4>In-URL-bar Autofill and One-Click Search Buttons</h4>
<p>These features can be disabled as follows:</p>
<ol type="A">
	<li>In a new tab, type or paste <strong>about:config</strong> in the address bar and press Enter/Return. Click the button accepting the risk.</li>
	<li>In the search box in the page, type or paste <strong>URLB</strong> and pause while the list is filtered.</li>
	<li><em>To stop showing autofill suggestions in the address bar:</em> Double-click the <strong>browser.urlbar.autoFill</strong> preference to 
	switch the value from true to false. (To re-enable this feature, double-click again, or use the reset arrow icon at the far right of the row.)</li>
	<li><em>To stop showing the one-off search buttons at the bottom of the drop-down:</em> Double-click the <strong>browser.urlbar.oneOffSearches</strong> preference to 
	switch the value from true to false. (To re-enable this feature, double-click again, or use the reset arrow icon at the far right of the row.)</li>
</ol>

<h4>What about the informational "blue bar"?</h4>
<p>The top row always provides information about what Firefox will do if you press the Enter/Return key, or click the Go arrow, right now. In the above screenshot, when there 
is an autofill match, the bar shows what URL will be loaded. If there isn't an autofill match but instead one or more search terms, Firefox will inform you what search 
engine it will use. If you are using a search engine keyword or bookmark keyword, the top row should indicate where that leads. Here's what those look like:</p>
<p><img src="img/Fx75-blue-bar.png" style="width:800px"></p>
<p>It's handy, but some people prefer not to see it. There is no checkbox or preference to hide the top row, but you can do it with a custom style rule 
in a userChrome.css file. More on that below.</p>
<p style="border-top:1px solid #aaa;">&nbsp;</p>

<h2 id="mbarstyler">Megabar Styler &ndash; Rules for userChrome.css</h2>
<p>You can use these controls to generate a rules file to restyle the Firefox 75 URL bar and drop-down. The rules can be incorporated directly into a userChrome.css file, 
or you could include them by reference as described in <a href="adding-style-recipes-userchrome-css.html">Adding Style Recipes to userChrome.css</a>.</p>
<table id="mbarsettings" border="0" cellspacing="0" style="border-collapse:collapse;width:100%">
	<tbody>
		<tr><td colspan="2"><p>Amount of URL bar enlargement: <br>
			<select id="popout" name="popout" size="5">
				<option value="0px">None</option>
				<option value="1px" selected>1 pixel</option>
				<option value="2px">2 pixels</option>
				<option value="3px">3 pixels</option>
				<option value="4px">4 pixels</option>
				<option value="5px">5 pixels</option>
				<option value="6px">6 pixels</option>
				<option value="7px">7 pixels (default)</option>
			</select><br>
			<em style="font-size:0.9em">Animation effect and shadow are removed in all cases.</em></p></td>
			<td><div id="popout-sprite" style="background-image: url(img/popout-sprite.png);" class="popout-1px"></div></td>
		</tr>
		<tr><td colspan="2"><p>Show the Visit / Search top row? <br>
			<select id="bluebar" name="bluebar" size="2">
				<option value="block" selected>Yes, I like it! (default)</option>
				<option value="none">No, hide it</option>
			</select></p>
			<p>Use a two-row layout? <br>
			<select id="rows" name="rows" size="2">
				<option value="1row" selected>No, keep the 1 row layout (default)</option>
				<option value="2row">Yes, put the URL below the title</option>
			</select></p>
			<p>Show a thin line between suggestions ? <br>
			<select id="borderwidth" name="borderwidth" size="2">
				<option value="0px">No thanks (default)</option>
				<option value="1px" selected>Sure, good idea</option>
			</select></p>
			<p>Rows visible on the drop-down without a scroll bar:<br>
			<select id="maxrows" name="maxrows" size="6">
				<option value="8">up to 8</option>
				<option value="10" selected>up to 10 (default in Fx48+)</option>
				<option value="12">up to 12</option>
				<option value="15">up to 15</option>
				<option value="18">up to 18</option>
				<option value="20">up to 20</option>
			</select><br>
			<span style="font-size:0.9em"><em>Note: If you set </em><code>browser.urlbar.maxRichResults</code><em> to a higher value, a scroll bar will appear. 
			The additional suggestions can be reached using the mouse, but not the down arrow key.</em></span></p></td>
			<td><div id="top-rows" style="background-image: url(img/topyes-1row.png); width: 540px; height: 480px; background-size: contain; margin-bottom: 1em"></div></td>
		</tr>
		<tr>
			<td><p>Title font size: <br>
			<select id="titlefont" name="titlefont" size="5">
				<option value="13px">13 pixels</option>
				<option value="14px">14 pixels</option>
				<option value="15px" selected>15 pixels</option>
				<option value="16px">16 pixels</option>
				<option value="18px">18 pixels</option>
			</select>
			</p></td>
			<td><p>URL font size: <br>
			<select id="urlfont" name="urlfont" size="5">
				<option value="12px">12 pixels</option>
				<option value="13px" selected>13 pixels</option>
				<option value="14px">14 pixels</option>
				<option value="15px">15 pixels</option>
				<option value="16px">16 pixels</option>
			</select>
			</p></td>
			<td colspan="2"><p>Modify bolding of text matches ? <br>
			<select id="match" name="match" size="4">
				<option value="700.0" selected>Bold text, no background (default)</option>
				<option value="700.05">Bold text, lightly shaded background</option>
				<option value="400.05">Regular text, lightly shaded background</option>
				<option value="400.1">Regular text, moderately shaded background</option>
			</select></p>
			</td>
		</tr>
	</tbody>
</table>

<h4>CSS based on above options: <button onclick="selectel('currentCSS'); this.blur();" style="margin-left:4em">Select CSS</button> 
	<button id="savecss" onclick="saveCSS(this);">Save below as .css File</button></h4>
<div id="currentCSS" style="width:100%; font-family:monospace; font-size:0.8em; white-space:pre-wrap; border:1px solid #00f; padding:1em; background-color:#f8f8f8; min-height:300px;">
<p>CSS to be shown here</p>
</div>
</div>
</article>

<footer>
<p>Copyright &copy; 2020 Jefferson Scher. All Rights Reserved. CSS examples available under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> or 
<a href="https://opensource.org/licenses/BSD-3-Clause">BSD-3-Clause License</a>. FileSaver.js v1.3.3 &copy; 2016 Eli Grey (<a href="https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md" 
target="_blank">MIT License</a>). <a href="privacy.html">Privacy statement</a>.</p>
</footer>
<script type="text/javascript" src="uc.js"></script>
<script>
var cssGeneral = '', cssTwoRow = '';
function init(){
	document.getElementById('popout').selectedIndex = 1;
	// fetch CSS files
	var myRequest = new Request('samples/megabar-general.css');
	fetch(myRequest)
	.then(function(response) {
		if (!response.ok) {
			throw new Error("HTTP error, status = " + response.status);
		}
		return response.text();
	})
	.then((text) => {
		cssGeneral += text;
	})
	.catch(function(error) {
		console.log('Error: ' + error.message);
	});

	myRequest = new Request('samples/megabar-two-row.css');
	fetch(myRequest)
	.then((response) => {
		if (!response.ok) {
			throw new Error("HTTP error, status = " + response.status);
		}
		return response.text();
	})
	.then((text) => {
		cssTwoRow += text;
	})
	.then(() => {
		buildCSS();
	})
	.catch(function(error) {
		console.log('Error: ' + error.message);
	});

}

// popout and drop-down images
function updateImgs(evt){
	var tgt = evt.target;
	switch (tgt.id){
		case 'popout':
			document.getElementById('popout-sprite').className = 'popout-' + evt.target.selectedIndex + 'px';
			break;
		case 'bluebar':
		case 'rows':
		case 'borderwidth':
			var fname = (document.getElementById('bluebar').value == 'block') ? 'topyes-' : 'topno-';
			fname += document.getElementById('rows').value;
			fname += (document.getElementById('borderwidth').value == '0px') ? '-noline' : '';
			document.getElementById('top-rows').style.backgroundImage = 'url(img/' + fname + '.png)';
			break;
		default:
			// no action
	}
}

// CSS div
function buildCSS(evt){
	var ctrls = document.querySelectorAll('#mbarsettings select');
	var cssTemp = cssGeneral;
	for(var i=0; i<ctrls.length; i++){
		switch (ctrls[i].id){
			case 'match':
				var matchParts = ctrls[i].value.split('.');
				cssTemp = cssTemp.replace('/*[[matchweight]]*/', matchParts[0]);
				cssTemp = cssTemp.replace('/*[[matchbg]]*/', '0.' + matchParts[1]);
				break;
			case 'rows':
				if (ctrls[i].value == '2row') cssTemp += '\n\n' + cssTwoRow;
			default:
				cssTemp = cssTemp.replace('/*[[' + ctrls[i].id + ']]*/', ctrls[i].value);
		}
	}
	document.getElementById('currentCSS').textContent = cssTemp;
	if (evt) updateImgs(evt);
}

function selectel(elid){
	var el=document.getElementById(elid);
	if (el){
		var sel = window.getSelection();
		sel.removeAllRanges();
		var rng = document.createRange();
		rng.selectNode(el);
		sel.addRange(rng);
	}
	return false;
}
function saveCSS(btn){
	var dummy = document.createElement('div');
	dummy.innerHTML = document.getElementById('currentCSS').innerHTML.replace(/\<br\>/gi, '<br>\n');
	saveAs(
		  new Blob(
			  [dummy.textContent.replace(/\x0a/g, "\x0d\x0a")]
			, {type: 'text/css;charset=UTF-8'}
		)
		, 'megabar-tweaks.css'
		, true
	);
}
document.getElementById('mbarsettings').addEventListener('change', buildCSS, false);
window.addEventListener('load', init, false);
</script>
<script type="text/javascript" src="FileSaver.min.js"></script>
</body>
</html>